import{r as u,u as N,t as v,j as e}from"./app-B9lfnha4.js";import{I as i}from"./InputError-DmRcyvgY.js";import{I as n}from"./InputLabel-Dgvss5Ye.js";import{P as b}from"./PrimaryButton-gHJONxSD.js";import{T as d}from"./TextInput-CQ1-soAE.js";import{P as C}from"./phone-input-qJNkwTFg.js";import{E as x,a as h}from"./eye-B6r8_NIG.js";import{d as S}from"./transition-B80scv3U.js";import"./index-N5B7cit2.js";import"./button-DBKSr4MI.js";import"./utils-DxrgW60L.js";import"./popover-BTgurNBe.js";import"./createLucideIcon-Ddh1YYn5.js";import"./floating-ui.utils.dom-Ds-VJJzb.js";import"./dialog-UJEt0wuN.js";import"./search-DQfGnZRH.js";import"./index-BztIbe42.js";import"./check-CVm0OMmE.js";function H({user:t,faculties:p,className:f=""}){const[l,j]=u.useState(!1),[c,w]=u.useState(!1),{data:a,setData:r,patch:g,errors:o,processing:y,recentlySuccessful:m}=N({phone_number:t.phone_number||"",matric_no:t.matric_no||"",faculty_id:t.faculty_id||"",year_of_study:t.year_of_study||"",duitnow_id:t.duitnow_id||"",password:"",password_confirmation:""});u.useEffect(()=>{m&&v.success("Student information updated successfully!",{description:"Your profile has been saved.",duration:4e3})},[m]);const _=s=>{s.preventDefault(),g(route("profile.update.student"))};return e.jsxs("section",{className:f,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Student Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your academic details and DuitNow ID."})]}),e.jsxs("form",{onSubmit:_,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"phone_number",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(C,{id:"phone_number",value:a.phone_number,onChange:s=>r("phone_number",s),defaultCountry:"MY",placeholder:"Enter phone number",className:"mt-1",required:!0}),e.jsx(i,{className:"mt-2",message:o.phone_number}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Required for account verification"})]}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"matric_no",children:["Matric Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{id:"matric_no",className:`mt-1 block w-full ${t.matric_no?"bg-gray-100":""}`,value:a.matric_no,onChange:s=>r("matric_no",s.target.value.toUpperCase()),disabled:!!t.matric_no,required:!0,autoComplete:"matric_no"}),e.jsx(i,{className:"mt-2",message:o.matric_no}),t.matric_no&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Matric number cannot be changed after it has been set."})]}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"faculty_id",children:["Faculty ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"faculty_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.faculty_id,onChange:s=>r("faculty_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a faculty"}),p.map(s=>e.jsxs("option",{value:s.id,children:[s.full_name," (",s.short_name,")"]},s.id))]}),e.jsx(i,{className:"mt-2",message:o.faculty_id})]}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"year_of_study",children:["Year of Study ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"year_of_study",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:a.year_of_study,onChange:s=>r("year_of_study",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select year"}),[1,2,3,4].map(s=>e.jsxs("option",{value:s,children:["Year ",s]},s))]}),e.jsx(i,{className:"mt-2",message:o.year_of_study})]}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"duitnow_id",children:["DuitNow ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{id:"duitnow_id",className:`mt-1 block w-full ${t.duitnow_id?"bg-gray-100":""}`,value:a.duitnow_id,onChange:s=>r("duitnow_id",s.target.value),disabled:!!t.duitnow_id,required:!0,autoComplete:"duitnow_id"}),e.jsx(i,{className:"mt-2",message:o.duitnow_id}),t.duitnow_id&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"DuitNow ID cannot be changed after it has been set."}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"⚠️ Warning: We will cross-check your DuitNow ID with submitted transactions."})]}),!t.password&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("div",{className:"mb-4 rounded-md bg-blue-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Set a Password (Backup for Google Login)"}),e.jsx("div",{className:"mt-2 text-sm text-blue-700",children:e.jsx("p",{children:"Set a password as backup in case you can't use Google login."})})]})]})})}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"password",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"password",type:l?"text":"password",className:"mt-1 block w-full pr-10",value:a.password,onChange:s=>r("password",s.target.value),required:!0,autoComplete:"new-password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3",onClick:()=>j(!l),children:l?e.jsx(x,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(h,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),e.jsx(i,{className:"mt-2",message:o.password})]}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"password_confirmation",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"password_confirmation",type:c?"text":"password",className:"mt-1 block w-full pr-10",value:a.password_confirmation,onChange:s=>r("password_confirmation",s.target.value),required:!0,autoComplete:"new-password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3",onClick:()=>w(!c),children:c?e.jsx(x,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(h,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),e.jsx(i,{className:"mt-2",message:o.password_confirmation})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{disabled:y,children:"Save"}),e.jsx(S,{show:m,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]})}export{H as default};
