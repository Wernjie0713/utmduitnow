import{d as H,u as c,j as e,H as K}from"./app-D3djMi1z.js";import{A as L,S as Y}from"./AuthenticatedLayout-DZO5WDYE.js";import{I as r}from"./InputError-qZSD95FI.js";import{I as i}from"./InputLabel-ChJQh9PD.js";import{P as u}from"./PrimaryButton-DM0kRhVS.js";import{T as l}from"./TextInput-CKrixay4.js";import{C as x,a as p,b as h,d as j,c as b}from"./card-CGauDGzo.js";import{U as O}from"./users-C2ivYjUz.js";import{T as N}from"./trash-2-L6kfpuC1.js";import{K as G}from"./key-square-DzmmthIP.js";import"./ApplicationLogo-DR5Al8_M.js";import"./transition-DD3lfjsW.js";import"./UserAvatar-DMxWifGL.js";import"./utils-DxrgW60L.js";import"./proxy-D9ZHkyEz.js";import"./popover-By6pyw1h.js";import"./button-2QLFVnxw.js";import"./createLucideIcon-CuKIg8Rh.js";import"./floating-ui.utils.dom-Ds-VJJzb.js";import"./use-controlled-state-_609xuTv.js";import"./index-Bkkt4zum.js";import"./log-out-DURLpOVm.js";function pe({unit:a}){const{user:w}=H().props.auth,t=a.manager_id===w.id,{data:o,setData:d,put:_,processing:y,errors:n,recentlySuccessful:D}=c({business_name:a.business_name,business_location:a.business_location,course_code:a.course_code||"",section:a.section||""}),C=s=>{s.preventDefault(),_(route("shop.update"),{preserveScroll:!0})},{data:g,setData:v,post:S,processing:I,errors:f,reset:M}=c({member_name:"",matric_no:""}),T=s=>{s.preventDefault(),S(route("shop.team.add"),{preserveScroll:!0,onSuccess:()=>M()})},{data:k,setData:A,post:F,processing:P,errors:q,reset:B}=c({duitnow_id:""}),E=s=>{s.preventDefault(),F(route("shop.duitnow.add"),{preserveScroll:!0,onSuccess:()=>B()})},m=c({}),R=s=>{confirm("Are you sure you want to remove this team member?")&&m.delete(route("shop.team.remove",s),{preserveScroll:!0})},U=s=>{confirm("Are you sure you want to remove this DuitNow ID?")&&m.delete(route("shop.duitnow.remove",s),{preserveScroll:!0})};return e.jsxs(L,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"My Business Unit Profile"}),children:[e.jsx(K,{title:"Business Profile"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8 space-y-6",children:[!t&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-md p-4 mb-6",children:"You are viewing this business unit as a team member. Only the manager can make changes."}),e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Y,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(h,{children:"Business Details"}),e.jsx(j,{children:"Update your business name and location type."})]})]})}),e.jsx(b,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"business_name",value:"Business Name"}),e.jsx(l,{id:"business_name",type:"text",value:o.business_name,className:"mt-1 block w-full",onChange:s=>d("business_name",s.target.value),required:!0,disabled:!t}),e.jsx(r,{message:n.business_name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"business_location",value:"Business Location Type"}),e.jsxs("select",{id:"business_location",value:o.business_location,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm disabled:opacity-50",onChange:s=>d("business_location",s.target.value),required:!0,disabled:!t,children:[e.jsx("option",{value:"online",children:"Online Based"}),e.jsx("option",{value:"physical",children:"Physical Kiosk / Store"})]}),e.jsx(r,{message:n.business_location,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"course_code",value:"Course Code"}),e.jsx(l,{id:"course_code",type:"text",value:o.course_code,className:"mt-1 block w-full uppercase",onChange:s=>d("course_code",s.target.value.toUpperCase()),required:!0,disabled:!t}),e.jsx(r,{message:n.course_code,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"section",value:"Section Code"}),e.jsx(l,{id:"section",type:"text",value:o.section,className:"mt-1 block w-full",onChange:s=>d("section",s.target.value),required:!0,disabled:!t}),e.jsx(r,{message:n.section,className:"mt-2"})]}),t&&e.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[e.jsx(u,{disabled:y,children:"Save Changes"}),D&&e.jsx("p",{className:"text-sm text-green-600",children:"Saved."})]})]})})]}),e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(O,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx(h,{children:"Team Members"}),e.jsx(j,{children:"Manage the people involved in your business."})]})]})}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Current Members"}),e.jsxs("div",{className:"border rounded-md divide-y overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-gray-50 flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("p",{className:"font-medium text-sm",children:"Manager (You)"})}),e.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full uppercase font-semibold",children:"Manager"})]}),a.team_members&&a.team_members.map(s=>e.jsxs("div",{className:"p-3 bg-white flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.member_name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.matric_no})]}),t&&e.jsx("button",{onClick:()=>R(s.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded transition-colors",title:"Remove Member",disabled:m.processing,children:e.jsx(N,{className:"w-4 h-4"})})]},s.id)),(!a.team_members||a.team_members.length===0)&&e.jsx("div",{className:"p-3 bg-white text-sm text-gray-500 italic text-center",children:"No additional team members yet."})]})]}),t&&e.jsxs("form",{onSubmit:T,className:"pt-2 border-t flex flex-col sm:flex-row items-end gap-3",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(i,{htmlFor:"member_name",value:"Member Name"}),e.jsx(l,{id:"member_name",type:"text",value:g.member_name,onChange:s=>v("member_name",s.target.value),className:"mt-1 block w-full",placeholder:"e.g. Ali Bin Abu",required:!0}),e.jsx(r,{message:f.member_name,className:"mt-2"})]}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(i,{htmlFor:"new_matric",value:"Matric Number"}),e.jsx(l,{id:"new_matric",type:"text",value:g.matric_no,onChange:s=>v("matric_no",s.target.value),className:"mt-1 block w-full uppercase",placeholder:"e.g. A22EC0000",required:!0}),e.jsx(r,{message:f.matric_no,className:"mt-2"})]}),e.jsx(u,{type:"submit",disabled:I,className:"mb-[2px] bg-green-600 hover:bg-green-700 w-full sm:w-auto justify-center",children:"Add"})]})]})]}),e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(G,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx(h,{children:"DuitNow IDs"}),e.jsx(j,{children:"Manage the active registration numbers for this unit."})]})]})}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Registered IDs"}),e.jsxs("div",{className:"border rounded-md divide-y overflow-hidden",children:[a.duitnow_ids&&a.duitnow_ids.map(s=>e.jsxs("div",{className:"p-3 bg-white flex justify-between items-center",children:[e.jsx("p",{className:"font-mono text-sm",children:s.duitnow_id}),t&&a.duitnow_ids.length>1&&e.jsx("button",{onClick:()=>U(s.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded transition-colors",title:"Remove ID",disabled:m.processing,children:e.jsx(N,{className:"w-4 h-4"})})]},s.id)),(!a.duitnow_ids||a.duitnow_ids.length===0)&&e.jsx("div",{className:"p-3 bg-white text-sm text-red-500 text-center font-medium",children:"WARNING: You have no active DuitNow IDs."})]})]}),t&&e.jsxs("form",{onSubmit:E,className:"pt-2 border-t flex items-end gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"new_duitnow",value:"Add New DuitNow ID"}),e.jsx(l,{id:"new_duitnow",type:"text",value:k.duitnow_id,onChange:s=>A("duitnow_id",s.target.value),className:"mt-1 block w-full",placeholder:"e.g. 0123456789",required:!0}),e.jsx(r,{message:q.duitnow_id,className:"mt-2"})]}),e.jsx(u,{type:"submit",disabled:P,className:"mb-[2px] bg-purple-600 hover:bg-purple-700",children:"Add"})]})]})]})]})})]})}export{pe as default};
