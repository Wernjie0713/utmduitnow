import{r as u,j as e,H as y,b as k}from"./app-D3djMi1z.js";import{A as P}from"./AuthenticatedLayout-DZO5WDYE.js";import{I as D,X as V}from"./popover-By6pyw1h.js";import{B as d}from"./button-2QLFVnxw.js";import{S as M,a as T,b as I,c as R,d as m}from"./select-Buwljau9.js";import{D as E,a as H,b as A,d as F}from"./dropdown-menu-D93AjIhL.js";import{T as U,a as z,b as g,c as B,d as K,e as j}from"./table-hG5a-Cqx.js";import{P as L,a as X,b as t,c as q,d as o,e as f,f as G}from"./pagination-BTOym5gj.js";import{u as J,f as C,g as O}from"./index-ygHrbbih.js";import{columns as w}from"./columns-Dd3xohKg.js";import{S as Q}from"./search-CTP6CmfA.js";import{C as W}from"./use-controlled-state-_609xuTv.js";import{D as Y}from"./download-C2vZZrT9.js";import"./ApplicationLogo-DR5Al8_M.js";import"./transition-DD3lfjsW.js";import"./UserAvatar-DMxWifGL.js";import"./utils-DxrgW60L.js";import"./proxy-D9ZHkyEz.js";import"./index-Bkkt4zum.js";import"./createLucideIcon-CuKIg8Rh.js";import"./log-out-DURLpOVm.js";import"./floating-ui.utils.dom-Ds-VJJzb.js";import"./check-BDWMKofN.js";import"./index-DvhQXPbi.js";import"./badge-BJk-76aQ.js";import"./users-C2ivYjUz.js";import"./key-square-DzmmthIP.js";function Se({units:a,filters:n}){const[b,N]=u.useState({}),[p,x]=u.useState(n?.search||""),i=J({data:a.data,columns:w,getCoreRowModel:O(),manualPagination:!0,manualFiltering:!0,manualSorting:!0,pageCount:a.last_page,state:{columnVisibility:b,pagination:{pageIndex:a.current_page-1,pageSize:n?.per_page||10}},onColumnVisibilityChange:N}),c=r=>{k.get(route("admin.entrepreneur.units"),{...n,...r},{preserveState:!0,preserveScroll:!0})},h=()=>{c({search:p,page:1})},_=()=>{x(""),c({search:"",page:1})},v=r=>{r.key==="Enter"&&h()},l=r=>{c({page:r})},S=()=>{window.location.href=route("admin.entrepreneur.units.export",n)};return e.jsxs(P,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Entrepreneur Units Management"}),children:[e.jsx(y,{title:"Entrepreneur Units Management"}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex w-full sm:w-auto gap-2 flex-1 max-w-md",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-500"}),e.jsx(D,{placeholder:"Search by business name, manager, or course tag...",value:p,onChange:r=>x(r.target.value),onKeyPress:v,className:"pl-9"})]}),e.jsx(d,{onClick:h,variant:"default",children:"Search"}),p&&e.jsx(d,{onClick:_,variant:"outline",size:"icon",children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(E,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(d,{variant:"outline",className:"gap-2",children:["Columns",e.jsx(W,{className:"h-4 w-4"})]})}),e.jsx(A,{align:"end",children:i.getAllColumns().filter(r=>r.getCanHide()).map(r=>e.jsx(F,{className:"capitalize",checked:r.getIsVisible(),onCheckedChange:s=>r.toggleVisibility(!!s),children:r.columnDef.meta?.label||r.id},r.id))})]}),e.jsxs(M,{value:String(n?.per_page||10),onValueChange:r=>c({per_page:r,page:1}),children:[e.jsx(T,{className:"w-[130px]",children:e.jsx(I,{})}),e.jsxs(R,{children:[e.jsx(m,{value:"10",children:"10 rows"}),e.jsx(m,{value:"25",children:"25 rows"}),e.jsx(m,{value:"50",children:"50 rows"}),e.jsx(m,{value:"100",children:"100 rows"})]})]}),e.jsxs(d,{onClick:S,variant:"outline",className:"gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Export CSV"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(U,{children:[e.jsx(z,{children:i.getHeaderGroups().map(r=>e.jsx(g,{children:r.headers.map(s=>e.jsx(B,{className:"border-r last:border-r-0",children:s.isPlaceholder?null:C(s.column.columnDef.header,s.getContext())},s.id))},r.id))}),e.jsx(K,{children:i.getRowModel().rows?.length?i.getRowModel().rows.map(r=>e.jsx(g,{"data-state":r.getIsSelected()&&"selected",children:r.getVisibleCells().map(s=>e.jsx(j,{className:"border-r last:border-r-0",children:C(s.column.columnDef.cell,s.getContext())},s.id))},r.id)):e.jsx(g,{children:e.jsx(j,{colSpan:w.length,className:"h-24 text-center",children:"No business units found."})})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," results"]}),e.jsx(L,{className:"mx-0 w-full sm:w-auto justify-center sm:justify-end",children:e.jsxs(X,{children:[e.jsx(t,{children:e.jsx(q,{onClick:()=>a.current_page>1&&l(a.current_page-1),className:a.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),a.current_page>2&&e.jsxs(e.Fragment,{children:[e.jsx(t,{children:e.jsx(o,{onClick:()=>l(1),className:"cursor-pointer",children:"1"})}),a.current_page>3&&e.jsx(f,{})]}),a.current_page>1&&e.jsx(t,{children:e.jsx(o,{onClick:()=>l(a.current_page-1),className:"cursor-pointer",children:a.current_page-1})}),e.jsx(t,{children:e.jsx(o,{isActive:!0,className:"cursor-pointer",children:a.current_page})}),a.current_page<a.last_page&&e.jsx(t,{children:e.jsx(o,{onClick:()=>l(a.current_page+1),className:"cursor-pointer",children:a.current_page+1})}),a.current_page<a.last_page-1&&e.jsxs(e.Fragment,{children:[a.current_page<a.last_page-2&&e.jsx(f,{}),e.jsx(t,{children:e.jsx(o,{onClick:()=>l(a.last_page),className:"cursor-pointer",children:a.last_page})})]}),e.jsx(t,{children:e.jsx(G,{onClick:()=>a.current_page<a.last_page&&l(a.current_page+1),className:a.current_page===a.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})]})})]})}export{Se as default};
