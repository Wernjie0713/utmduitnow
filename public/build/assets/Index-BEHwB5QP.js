import{r as u,j as e,H as y,b as k}from"./app-B9lfnha4.js";import{A as P}from"./AuthenticatedLayout-UtQUiQ-w.js";import{I as D,X as V}from"./popover-BTgurNBe.js";import{B as d}from"./button-DBKSr4MI.js";import{D as I,b as M,c as T,i as R,S as H,e as E,f as A,g as F,h as m}from"./select-ySBbetOo.js";import{T as z,a as B,b as x,c as U,d as K,e as j}from"./table-n4pZIN_y.js";import{P as L,a as X,b as n,c as q,d as i,e as f,f as G}from"./pagination-ClswqU7-.js";import{u as J,f as C,g as O}from"./index-LcOCT_RW.js";import{columns as w}from"./columns-Qto2BAYz.js";import{S as Q}from"./search-DQfGnZRH.js";import{C as W}from"./use-controlled-state-DT5lt6wS.js";import{D as Y}from"./download-3CAzVNTx.js";import"./ApplicationLogo-zd4BETSS.js";import"./transition-B80scv3U.js";import"./UserAvatar-COCHZlMW.js";import"./utils-DxrgW60L.js";import"./proxy-CT6J4zB_.js";import"./index-G18pQgYs.js";import"./createLucideIcon-Ddh1YYn5.js";import"./log-out-CrQfjdpH.js";import"./floating-ui.utils.dom-Ds-VJJzb.js";import"./index-BztIbe42.js";import"./check-CVm0OMmE.js";import"./badge-B1AQ0ii8.js";import"./circle-check-BA0GhR6O.js";import"./circle-x-BYzgDugE.js";import"./formatDistanceToNow-Coef0oCf.js";import"./en-US-CKZa3QIe.js";function ye({users:a,filters:l}){const[N,b]=u.useState({}),[p,g]=u.useState(l?.search||""),o=J({data:a.data,columns:w,getCoreRowModel:O(),manualPagination:!0,manualFiltering:!0,manualSorting:!0,pageCount:a.last_page,state:{columnVisibility:N,pagination:{pageIndex:a.current_page-1,pageSize:l?.per_page||10}},onColumnVisibilityChange:b}),c=t=>{k.get(route("admin.users"),{...l,...t},{preserveState:!0,preserveScroll:!0})},h=()=>{c({search:p,page:1})},_=()=>{g(""),c({search:"",page:1})},v=t=>{t.key==="Enter"&&h()},s=t=>{c({page:t})},S=()=>{window.location.href=route("admin.users.export",l)};return e.jsxs(P,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"User Management"}),children:[e.jsx(y,{title:"User Management"}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex w-full sm:w-auto gap-2 flex-1 max-w-md",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-500"}),e.jsx(D,{placeholder:"Search by name, email, matric no, phone, or DuitNow ID...",value:p,onChange:t=>g(t.target.value),onKeyPress:v,className:"pl-9"})]}),e.jsx(d,{onClick:h,variant:"default",children:"Search"}),p&&e.jsx(d,{onClick:_,variant:"outline",size:"icon",children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(I,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(d,{variant:"outline",className:"gap-2",children:["Columns",e.jsx(W,{className:"h-4 w-4"})]})}),e.jsx(T,{align:"end",children:o.getAllColumns().filter(t=>t.getCanHide()).map(t=>e.jsx(R,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:r=>t.toggleVisibility(!!r),children:t.columnDef.meta?.label||t.id},t.id))})]}),e.jsxs(H,{value:String(l?.per_page||10),onValueChange:t=>c({per_page:t,page:1}),children:[e.jsx(E,{className:"w-[130px]",children:e.jsx(A,{})}),e.jsxs(F,{children:[e.jsx(m,{value:"10",children:"10 rows"}),e.jsx(m,{value:"25",children:"25 rows"}),e.jsx(m,{value:"50",children:"50 rows"}),e.jsx(m,{value:"100",children:"100 rows"})]})]}),e.jsxs(d,{onClick:S,variant:"outline",className:"gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Export CSV"]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(z,{children:[e.jsx(B,{children:o.getHeaderGroups().map(t=>e.jsx(x,{children:t.headers.map(r=>e.jsx(U,{className:"border-r last:border-r-0",children:r.isPlaceholder?null:C(r.column.columnDef.header,r.getContext())},r.id))},t.id))}),e.jsx(K,{children:o.getRowModel().rows?.length?o.getRowModel().rows.map(t=>e.jsx(x,{"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(r=>e.jsx(j,{className:"border-r last:border-r-0",children:C(r.column.columnDef.cell,r.getContext())},r.id))},t.id)):e.jsx(x,{children:e.jsx(j,{colSpan:w.length,className:"h-24 text-center",children:"No users found."})})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",a.from||0," to ",a.to||0," of ",a.total," results"]}),e.jsx(L,{className:"mx-0 w-full sm:w-auto justify-center sm:justify-end",children:e.jsxs(X,{children:[e.jsx(n,{children:e.jsx(q,{onClick:()=>a.current_page>1&&s(a.current_page-1),className:a.current_page===1?"pointer-events-none opacity-50":"cursor-pointer"})}),a.current_page>2&&e.jsxs(e.Fragment,{children:[e.jsx(n,{children:e.jsx(i,{onClick:()=>s(1),className:"cursor-pointer",children:"1"})}),a.current_page>3&&e.jsx(f,{})]}),a.current_page>1&&e.jsx(n,{children:e.jsx(i,{onClick:()=>s(a.current_page-1),className:"cursor-pointer",children:a.current_page-1})}),e.jsx(n,{children:e.jsx(i,{isActive:!0,className:"cursor-pointer",children:a.current_page})}),a.current_page<a.last_page&&e.jsx(n,{children:e.jsx(i,{onClick:()=>s(a.current_page+1),className:"cursor-pointer",children:a.current_page+1})}),a.current_page<a.last_page-1&&e.jsxs(e.Fragment,{children:[a.current_page<a.last_page-2&&e.jsx(f,{}),e.jsx(n,{children:e.jsx(i,{onClick:()=>s(a.last_page),className:"cursor-pointer",children:a.last_page})})]}),e.jsx(n,{children:e.jsx(G,{onClick:()=>a.current_page<a.last_page&&s(a.current_page+1),className:a.current_page===a.last_page?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})]})})]})}export{ye as default};
