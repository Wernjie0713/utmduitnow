import{j as e,H as W,L as R}from"./app-BJdaTNqI.js";import{A as H,B as Y}from"./AuthenticatedLayout-B1UKtRnA.js";import{C as m,a as d,b as o,c as x,d as B}from"./card-CbrZYVPb.js";import{M as y,T as v,a as T,b as i,d as c}from"./tabs-Dq4BGMCT.js";import{T as p,a as z,b as g,c as j,d as _,e as a}from"./table-B8dgzD2h.js";import{U as A}from"./UserAvatar-7oWcXKi_.js";import{C as E}from"./CompetitionAnnouncementModal-BzAE1qfL.js";import{A as U,a as V,b as $}from"./alert-yg9Wn2fS.js";import{T as I}from"./trending-up-GTdUSglm.js";import{T as u}from"./use-controlled-state-DkZSzQIY.js";import{A as C}from"./award-BWDVGNH4.js";import{c as O}from"./createLucideIcon-B79Mf7u7.js";import{C as F}from"./circle-alert-CUCqq0y1.js";import"./ApplicationLogo-DgQIk4Ie.js";import"./transition-CDRgjYIX.js";import"./utils-DxrgW60L.js";import"./proxy-CRcFvVbD.js";import"./popover-BWURJgjT.js";import"./button-DF_YCOm-.js";import"./floating-ui.utils.dom-Ds-VJJzb.js";import"./index-DUWZ4qQK.js";import"./log-out-CTNyGy52.js";import"./index-BvgExRt0.js";import"./dialog-C38iCmwF.js";import"./calendar-D85PYRDC.js";import"./info-Vzh5jxVg.js";import"./circle-check-DFmS3aEP.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],G=O("list-ordered",q);function ke({auth:b,stats:s,leaderboards:t,isExtendedPeriod:k=!1,extendedSubmissionEnd:w,showCompetitionAnnouncement:M=!1}){const N=b.user?.roles?.some(n=>n.name==="admin")||!1,D=n=>{switch(n){case 1:return e.jsx(u,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(y,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(C,{className:"h-5 w-5 text-amber-600"});default:return null}},L=n=>{switch(n){case 1:return"border-l-4 border-yellow-500";case 2:return"border-l-4 border-gray-400";case 3:return"border-l-4 border-amber-500";default:return""}},r=n=>{const{top20:f,user_position:h}=n||{};return!f||f.length===0?e.jsx("div",{className:"text-center py-16 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(u,{className:"h-16 w-16 text-gray-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"No rankings yet"}),e.jsx("p",{className:"text-sm",children:"Be the first to submit a transaction!"})]})]})}):e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx(p,{className:"table-fixed w-full",children:e.jsx(z,{className:"bg-gray-50",children:e.jsxs(g,{children:[e.jsx(j,{className:"w-24 px-6",children:"Rank"}),e.jsx(j,{className:"w-20 px-4",children:"Avatar"}),e.jsx(j,{className:"px-4",children:"Name"}),e.jsx(j,{className:"w-36 text-right px-6",children:"Transactions"})]})})}),e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"520px"},children:e.jsx(p,{className:"table-fixed w-full",children:e.jsx(_,{children:f.map((l,S)=>e.jsxs(g,{className:`${L(l.rank)} ${S%2===0?"":"bg-gray-50/50"} hover:bg-gray-100/50 transition-colors`,children:[e.jsx(a,{className:"w-24 font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[D(l.rank),e.jsxs("span",{className:l.rank<=3?"text-lg":"",children:["#",l.rank]})]})}),e.jsx(a,{className:"w-20 px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(A,{user:l.user,size:"sm"})})}),e.jsx(a,{className:"font-medium px-4",children:l.user?.name}),e.jsx(a,{className:`w-36 text-right font-bold px-6 ${l.rank<=3?"text-xl":"text-lg"}`,children:e.jsx("span",{className:l.rank===1?"text-yellow-600":l.rank===2?"text-gray-600":l.rank===3?"text-amber-600":"",children:l.transaction_count})})]},l.user_id))})})}),h&&e.jsx("div",{className:"bg-gray-100 border-t-2 border-gray-300",children:e.jsx(p,{className:"table-fixed w-full",children:e.jsx(_,{children:e.jsxs(g,{children:[e.jsxs(a,{className:"w-24 font-bold px-6",children:["#",h.rank!==null&&h.rank!==void 0?h.rank:"-"]}),e.jsx(a,{className:"w-20 px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(A,{user:b.user,size:"sm"})})}),e.jsx(a,{className:"font-bold px-4",children:"You"}),e.jsx(a,{className:"w-36 text-right font-bold text-lg px-6",children:h.transaction_count||0})]})})})})]})};return e.jsxs(H,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Dashboard"}),children:[e.jsx(W,{title:"Dashboard"}),e.jsx(E,{show:M}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(m,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Submissions"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.total_submissions}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time submissions"})]})]}),e.jsxs(m,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Weekly Ranking"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["#",s.weekly_rank!==null&&s.weekly_rank!==void 0?s.weekly_rank:"-"]}),s.weekly_rank!==null&&s.weekly_rank!==void 0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.weekly_total||0]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This week's position"})]})]}),e.jsxs(m,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Monthly Ranking"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["#",s.monthly_rank!==null&&s.monthly_rank!==void 0?s.monthly_rank:"-"]}),s.monthly_rank!==null&&s.monthly_rank!==void 0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.monthly_total||0]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This month's position"})]})]}),e.jsxs(m,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"All-Time Ranking"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["#",s.alltime_rank!==null&&s.alltime_rank!==void 0?s.alltime_rank:"-"]}),s.alltime_rank!==null&&s.alltime_rank!==void 0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.alltime_total||0]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N?"Overall position":"Since Nov 1, 2025"})]})]})]}),e.jsxs(m,{className:"border-blue-200 bg-blue-50/50",children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-blue-600"}),e.jsx(o,{className:"text-blue-900",children:"Event Ended"})]})}),e.jsx(x,{children:e.jsx("p",{className:"text-blue-800",children:"The event has ended. Thank you for your participation! You can still view your rankings and transaction history. Stay tuned for future events!"})})]}),e.jsxs(m,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Transaction Leaderboard - Top 20"}),e.jsx(B,{children:"See where you rank among fellow students!"})]}),e.jsx(R,{href:route("leaderboard.full"),children:e.jsxs(Y,{variant:"outline",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"View Full Rankings"]})})]})}),e.jsxs(x,{children:[k&&e.jsxs(U,{className:"mb-6 border-blue-200 bg-blue-50",children:[e.jsx(F,{className:"h-4 w-4 text-blue-600"}),e.jsx(V,{className:"text-blue-900",children:"Week 3 Extended Submission Period"}),e.jsxs($,{className:"text-blue-800",children:["Due to server downtime earlier this week, Week 3 submissions have been extended until"," ",e.jsx("strong",{children:w}),". You can submit both Week 3 (Nov 17-23) and Week 4 (Nov 24-30) transactions during this period."]})]}),k?e.jsxs(v,{defaultValue:"week3",className:"w-full",children:[e.jsxs(T,{className:"grid w-full grid-cols-4",children:[e.jsx(i,{value:"week3",children:"Week 3"}),e.jsx(i,{value:"week4",children:"Week 4"}),e.jsx(i,{value:"monthly",children:"Monthly"}),e.jsx(i,{value:"all-time",children:"All-Time"})]}),e.jsxs(c,{value:"week3",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Week 3: November 17 - 23, 2025"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Extended submission until ",w]})]}),r(t.week3)]}),e.jsxs(c,{value:"week4",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Week 4: November 24 - 30, 2025"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Current week"})]}),r(t.week4)]}),e.jsxs(c,{value:"monthly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{month:"long",year:"numeric"})})]}),r(t.monthly)]}),e.jsxs(c,{value:"all-time",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"All-Time Champions"}),e.jsx("p",{className:"text-sm text-gray-600",children:N?"Since the beginning of the competition":"Since November 1, 2025"})]}),r(t.allTime)]})]}):e.jsxs(v,{defaultValue:"weekly",className:"w-full",children:[e.jsxs(T,{className:"grid w-full grid-cols-3",children:[e.jsx(i,{value:"weekly",children:"Weekly"}),e.jsx(i,{value:"monthly",children:"Monthly"}),e.jsx(i,{value:"all-time",children:"All-Time"})]}),e.jsxs(c,{value:"weekly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Week"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r(t.weekly)]}),e.jsxs(c,{value:"monthly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{month:"long",year:"numeric"})})]}),r(t.monthly)]}),e.jsxs(c,{value:"all-time",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"All-Time Champions"}),e.jsx("p",{className:"text-sm text-gray-600",children:N?"Since the beginning of the competition":"Since November 1, 2025"})]}),r(t.allTime)]})]})]})]})]})]})}export{ke as default};
