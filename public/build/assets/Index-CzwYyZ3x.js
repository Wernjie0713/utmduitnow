import{r as S,j as e,H as U,L as P,b as W}from"./app-qetWhnOG.js";import{A as $}from"./AuthenticatedLayout-YHDnYIvS.js";import{G as q}from"./GuestLayout-BLfX6NDk.js";import{C as F,a as J,b as K,d as O,c as Q}from"./card-DKIMLcQB.js";import{T as A,a as L,b as n,d as i,M as X}from"./tabs-8KmE8uId.js";import{T as u,a as Z,b,c as m,d as D,e as r}from"./table-CputeLm7.js";import{B as ee}from"./button-Dq77yllh.js";import{U as M}from"./UserAvatar-Of6IaFkl.js";import{A as se,a as ae,b as le}from"./alert-s7hvO5TJ.js";import{S as N,a as g,b as v,c as p,d as a}from"./select-DkVS-V2O.js";import{c as re}from"./createLucideIcon-DKCLQZta.js";import{C as te}from"./circle-alert-C0rKU405.js";import{T as _}from"./use-controlled-state-AiZYFvZO.js";import{A as ne}from"./award-HuAdYT1K.js";import"./ApplicationLogo-DZ3cp5zd.js";import"./transition-C7jrS6w9.js";import"./utils-DxrgW60L.js";import"./proxy-DOP5oCNK.js";import"./popover-Bnp3oNpM.js";import"./floating-ui.utils.dom-Ds-VJJzb.js";import"./index-VZjm6uBK.js";import"./log-out-CC9EDxz3.js";import"./index-DtzJ2kgm.js";import"./check-BxVQqN8H.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ce=re("arrow-left",ie);function He({auth:c,isExtendedPeriod:f=!1,weeklyData:E,week3Data:H,week4Data:V,monthlyData:w,allTimeData:k,hasEnded:de=!1,selectedWeek:B=null,selectedMonth:y=null,activeTab:x="weekly"}){const[d,h]=S.useState(x);S.useEffect(()=>{h(x)},[x]);const R=l=>{W.get(route("leaderboard.index"),{week:l},{preserveState:!0})},T=l=>{W.get(route("leaderboard.index"),{month:l,year:"2025"},{preserveState:!0})},C=c?.user?.roles?.some(l=>l.name==="admin")||!1,Y=l=>{switch(l){case 1:return e.jsx(_,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(X,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(ne,{className:"h-5 w-5 text-amber-600"});default:return null}},I=l=>{switch(l){case 1:return"bg-yellow-50 border-l-4 border-yellow-400";case 2:return"bg-gray-50 border-l-4 border-gray-400";case 3:return"bg-amber-50 border-l-4 border-amber-400";default:return""}},t=l=>{const{top20:j,user_position:o}=l||{};return!j||j.length===0?e.jsx("div",{className:"text-center py-16 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(_,{className:"h-16 w-16 text-gray-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"No rankings yet"}),e.jsx("p",{className:"text-sm",children:"Be the first to submit a transaction!"})]})]})}):e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx(u,{children:e.jsx(Z,{className:"bg-gray-50",children:e.jsxs(b,{children:[e.jsx(m,{className:"w-20",children:"Rank"}),e.jsx(m,{className:"w-16",children:"Avatar"}),e.jsx(m,{children:"Name"}),e.jsx(m,{className:"w-32 text-right",children:"Transactions"})]})})}),e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"520px"},children:e.jsx(u,{children:e.jsx(D,{children:j.map((s,oe)=>e.jsxs(b,{className:I(s.rank),children:[e.jsx(r,{className:"w-20 font-bold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Y(s.rank),e.jsxs("span",{className:s.rank<=3?"text-lg":"",children:["#",s.rank]})]})}),e.jsx(r,{className:"w-16",children:e.jsx(M,{user:s.user,size:"sm"})}),e.jsx(r,{className:"font-medium",children:s.user?.name}),e.jsx(r,{className:`w-32 text-right font-bold ${s.rank<=3?"text-xl":"text-lg"}`,children:e.jsx("span",{className:s.rank===1?"text-yellow-600":s.rank===2?"text-gray-600":s.rank===3?"text-amber-600":"",children:s.transaction_count})})]},s.user_id))})})}),c?.user&&o&&e.jsx("div",{className:"bg-blue-50 border-t-2 border-blue-300",children:e.jsx(u,{children:e.jsx(D,{children:e.jsxs(b,{children:[e.jsxs(r,{className:"w-20 font-bold",children:["#",o.rank!==null&&o.rank!==void 0?o.rank:"-"]}),e.jsx(r,{className:"w-16",children:e.jsx(M,{user:c.user,size:"sm"})}),e.jsx(r,{className:"font-bold",children:"You"}),e.jsx(r,{className:"w-32 text-right font-bold text-lg",children:o.transaction_count||0})]})})})})]})},z=c?.user?$:q,G=c?.user?{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Leaderboard"})}:{};return e.jsxs(z,{...G,children:[e.jsx(U,{title:"Leaderboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsxs(F,{children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Transaction Leaderboard - Top 20"}),e.jsx(O,{children:"Compete with fellow students to reach the top of the leaderboard!"})]}),e.jsx(P,{href:route("dashboard"),children:e.jsxs(ee,{variant:"outline",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})]})}),e.jsxs(Q,{children:[f&&e.jsxs(se,{className:"mb-6 border-blue-200 bg-blue-50",children:[e.jsx(te,{className:"h-4 w-4 text-blue-600"}),e.jsx(ae,{className:"text-blue-900",children:"Week 3 Extended Submission Period"}),e.jsxs(le,{className:"text-blue-800",children:["Due to server downtime earlier this week, Week 3 submissions have been extended until"," ",e.jsx("strong",{children:extendedSubmissionEnd}),". You can submit both Week 3 (Nov 17-23) and Week 4 (Nov 24-30) transactions during this period."]})]}),f?e.jsxs(A,{value:d,onValueChange:h,className:"w-full",children:[e.jsxs(L,{className:"grid w-full grid-cols-4 mb-6",children:[e.jsx(n,{value:"week3",children:"Week 3"}),e.jsx(n,{value:"week4",children:"Week 4"}),e.jsx(n,{value:"monthly",children:"Monthly"}),e.jsx(n,{value:"all-time",children:"All-Time"})]}),e.jsx("div",{className:"flex justify-end mb-4",children:d==="monthly"&&e.jsxs(N,{value:y,onValueChange:T,children:[e.jsx(g,{className:"w-[180px]",children:e.jsx(v,{placeholder:"Select Month"})}),e.jsxs(p,{children:[e.jsx(a,{value:"11",children:"November 2025"}),e.jsx(a,{value:"12",children:"December 2025"})]})]})}),e.jsxs(i,{value:"week3",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Week 3: November 17 - 23, 2025"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Extended submission until ",extendedSubmissionEnd]})]}),t(H)]}),e.jsxs(i,{value:"week4",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Week 4: November 24 - 30, 2025"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Current week"})]}),t(V)]}),e.jsxs(i,{value:"monthly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{month:"long",year:"numeric"})})]}),t(w)]}),e.jsxs(i,{value:"all-time",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"All-Time Champions"}),e.jsx("p",{className:"text-sm text-gray-600",children:C?"Since the beginning of the competition":"Since November 1, 2025"})]}),t(k)]})]}):e.jsxs(A,{value:d,onValueChange:h,className:"w-full",children:[e.jsxs(L,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsx(n,{value:"weekly",children:"Weekly"}),e.jsx(n,{value:"monthly",children:"Monthly"}),e.jsx(n,{value:"all-time",children:"All-Time"})]}),e.jsxs("div",{className:"flex justify-end mb-4",children:[d==="weekly"&&e.jsxs(N,{value:B,onValueChange:R,children:[e.jsx(g,{className:"w-[180px]",children:e.jsx(v,{placeholder:"Select Week"})}),e.jsxs(p,{children:[e.jsx(a,{value:"1",children:"Week 1 (Nov 1-9)"}),e.jsx(a,{value:"2",children:"Week 2 (Nov 10-16)"}),e.jsx(a,{value:"3",children:"Week 3 (Nov 17-23)"}),e.jsx(a,{value:"4",children:"Week 4 (Nov 24-30)"}),e.jsx(a,{value:"5",children:"Week 5 (Dec 1-7)"}),e.jsx(a,{value:"6",children:"Week 6 (Dec 8-14)"}),e.jsx(a,{value:"7",children:"Week 7 (Dec 15-21)"}),e.jsx(a,{value:"8",children:"Week 8 (Dec 22-28)"})]})]}),d==="monthly"&&e.jsxs(N,{value:y,onValueChange:T,children:[e.jsx(g,{className:"w-[180px]",children:e.jsx(v,{placeholder:"Select Month"})}),e.jsxs(p,{children:[e.jsx(a,{value:"11",children:"November 2025"}),e.jsx(a,{value:"12",children:"December 2025"})]})]})]}),e.jsxs(i,{value:"weekly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Week"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t(E)]}),e.jsxs(i,{value:"monthly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{month:"long",year:"numeric"})})]}),t(w)]}),e.jsxs(i,{value:"all-time",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"All-Time Champions"}),e.jsx("p",{className:"text-sm text-gray-600",children:C?"Since the beginning of the competition":"Since November 1, 2025"})]}),t(k)]})]})]})]})})})]})}export{He as default};
