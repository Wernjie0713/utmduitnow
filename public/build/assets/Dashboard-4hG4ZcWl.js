import{j as e,H as U,L as v}from"./app-B9lfnha4.js";import{A as Y,B as f}from"./AuthenticatedLayout-UtQUiQ-w.js";import{C as d,a as m,b as o,c as x,d as T}from"./card-BjwGoSEE.js";import{M as _,T as A,a as C,b as n,d as c}from"./tabs-5tha8Mtb.js";import{T as b,a as B,b as p,c as j,d as M,e as a}from"./table-n4pZIN_y.js";import{U as D}from"./UserAvatar-COCHZlMW.js";import{C as $}from"./CompetitionAnnouncementModal-Mj8yCfQC.js";import{A as z,a as V,b as I}from"./alert-D0tD5Wb9.js";import{T as O}from"./trending-up-CKlSljRK.js";import{T as g,U as E}from"./use-controlled-state-DT5lt6wS.js";import{A as L}from"./award-CpLigNWS.js";import{c as F}from"./createLucideIcon-Ddh1YYn5.js";import{C as q}from"./circle-alert-C1UQ20LB.js";import"./ApplicationLogo-zd4BETSS.js";import"./transition-B80scv3U.js";import"./utils-DxrgW60L.js";import"./proxy-CT6J4zB_.js";import"./popover-BTgurNBe.js";import"./button-DBKSr4MI.js";import"./floating-ui.utils.dom-Ds-VJJzb.js";import"./index-G18pQgYs.js";import"./log-out-CrQfjdpH.js";import"./index-BztIbe42.js";import"./dialog-UJEt0wuN.js";import"./calendar-BeHYKQZI.js";import"./info-DezJmSZT.js";import"./circle-check-BA0GhR6O.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],J=F("list-ordered",G);function we({auth:y,stats:s,leaderboards:t,isExtendedPeriod:w=!1,extendedSubmissionEnd:k,showCompetitionAnnouncement:S=!1}){const u=y.user?.roles?.some(i=>i.name==="admin")||!1,W=i=>{switch(i){case 1:return e.jsx(g,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(_,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(L,{className:"h-5 w-5 text-amber-600"});default:return null}},R=i=>{switch(i){case 1:return"border-l-4 border-yellow-500";case 2:return"border-l-4 border-gray-400";case 3:return"border-l-4 border-amber-500";default:return""}},r=i=>{const{top20:N,user_position:h}=i||{};return!N||N.length===0?e.jsx("div",{className:"text-center py-16 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(g,{className:"h-16 w-16 text-gray-300"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"No rankings yet"}),e.jsx("p",{className:"text-sm",children:"Be the first to submit a transaction!"})]})]})}):e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx(b,{className:"table-fixed w-full",children:e.jsx(B,{className:"bg-gray-50",children:e.jsxs(p,{children:[e.jsx(j,{className:"w-24 px-6",children:"Rank"}),e.jsx(j,{className:"w-20 px-4",children:"Avatar"}),e.jsx(j,{className:"px-4",children:"Name"}),e.jsx(j,{className:"w-36 text-right px-6",children:"Transactions"})]})})}),e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"520px"},children:e.jsx(b,{className:"table-fixed w-full",children:e.jsx(M,{children:N.map((l,H)=>e.jsxs(p,{className:`${R(l.rank)} ${H%2===0?"":"bg-gray-50/50"} hover:bg-gray-100/50 transition-colors`,children:[e.jsx(a,{className:"w-24 font-bold px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[W(l.rank),e.jsxs("span",{className:l.rank<=3?"text-lg":"",children:["#",l.rank]})]})}),e.jsx(a,{className:"w-20 px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(D,{user:l.user,size:"sm"})})}),e.jsx(a,{className:"font-medium px-4",children:l.user?.name}),e.jsx(a,{className:`w-36 text-right font-bold px-6 ${l.rank<=3?"text-xl":"text-lg"}`,children:e.jsx("span",{className:l.rank===1?"text-yellow-600":l.rank===2?"text-gray-600":l.rank===3?"text-amber-600":"",children:l.transaction_count})})]},l.user_id))})})}),h&&e.jsx("div",{className:"bg-gray-100 border-t-2 border-gray-300",children:e.jsx(b,{className:"table-fixed w-full",children:e.jsx(M,{children:e.jsxs(p,{children:[e.jsxs(a,{className:"w-24 font-bold px-6",children:["#",h.rank!==null&&h.rank!==void 0?h.rank:"-"]}),e.jsx(a,{className:"w-20 px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(D,{user:y.user,size:"sm"})})}),e.jsx(a,{className:"font-bold px-4",children:"You"}),e.jsx(a,{className:"w-36 text-right font-bold text-lg px-6",children:h.transaction_count||0})]})})})})]})};return e.jsxs(Y,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Dashboard"}),children:[e.jsx(U,{title:"Dashboard"}),e.jsx($,{show:S}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Total Submissions"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.total_submissions}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All time submissions"})]})]}),e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Weekly Ranking"}),e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["#",s.weekly_rank!==null&&s.weekly_rank!==void 0?s.weekly_rank:"-"]}),s.weekly_rank!==null&&s.weekly_rank!==void 0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.weekly_total||0]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This week's position"})]})]}),e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Monthly Ranking"}),e.jsx(_,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["#",s.monthly_rank!==null&&s.monthly_rank!==void 0?s.monthly_rank:"-"]}),s.monthly_rank!==null&&s.monthly_rank!==void 0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.monthly_total||0]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This month's position"})]})]}),e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"All-Time Ranking"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["#",s.alltime_rank!==null&&s.alltime_rank!==void 0?s.alltime_rank:"-"]}),s.alltime_rank!==null&&s.alltime_rank!==void 0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",s.alltime_total||0]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u?"Overall position":"Since Nov 1, 2025"})]})]})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(o,{children:"Daily Submission Limit"}),e.jsx(T,{children:"Track your daily submission progress"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[s.today_submissions," / ",s.max_submissions_per_day]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Submissions today"})]}),e.jsx("div",{children:s.can_submit_today?e.jsx(v,{href:route("transactions.submit"),children:e.jsxs(f,{className:"gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),"Submit Transaction"]})}):e.jsx(f,{disabled:!0,children:"Daily Limit Reached"})})]}),e.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all",style:{width:`${s.today_submissions/s.max_submissions_per_day*100}%`}})})]})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Transaction Leaderboard - Top 20"}),e.jsx(T,{children:"See where you rank among fellow students!"})]}),e.jsx(v,{href:route("leaderboard.full"),children:e.jsxs(f,{variant:"outline",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"View Full Rankings"]})})]})}),e.jsxs(x,{children:[w&&e.jsxs(z,{className:"mb-6 border-blue-200 bg-blue-50",children:[e.jsx(q,{className:"h-4 w-4 text-blue-600"}),e.jsx(V,{className:"text-blue-900",children:"Week 3 Extended Submission Period"}),e.jsxs(I,{className:"text-blue-800",children:["Due to server downtime earlier this week, Week 3 submissions have been extended until"," ",e.jsx("strong",{children:k}),". You can submit both Week 3 (Nov 17-23) and Week 4 (Nov 24-30) transactions during this period."]})]}),w?e.jsxs(A,{defaultValue:"week3",className:"w-full",children:[e.jsxs(C,{className:"grid w-full grid-cols-4",children:[e.jsx(n,{value:"week3",children:"Week 3"}),e.jsx(n,{value:"week4",children:"Week 4"}),e.jsx(n,{value:"monthly",children:"Monthly"}),e.jsx(n,{value:"all-time",children:"All-Time"})]}),e.jsxs(c,{value:"week3",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Week 3: November 17 - 23, 2025"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Extended submission until ",k]})]}),r(t.week3)]}),e.jsxs(c,{value:"week4",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Week 4: November 24 - 30, 2025"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Current week"})]}),r(t.week4)]}),e.jsxs(c,{value:"monthly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{month:"long",year:"numeric"})})]}),r(t.monthly)]}),e.jsxs(c,{value:"all-time",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"All-Time Champions"}),e.jsx("p",{className:"text-sm text-gray-600",children:u?"Since the beginning of the competition":"Since November 1, 2025"})]}),r(t.allTime)]})]}):e.jsxs(A,{defaultValue:"weekly",className:"w-full",children:[e.jsxs(C,{className:"grid w-full grid-cols-3",children:[e.jsx(n,{value:"weekly",children:"Weekly"}),e.jsx(n,{value:"monthly",children:"Monthly"}),e.jsx(n,{value:"all-time",children:"All-Time"})]}),e.jsxs(c,{value:"weekly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Week"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r(t.weekly)]}),e.jsxs(c,{value:"monthly",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"This Month"}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-MY",{month:"long",year:"numeric"})})]}),r(t.monthly)]}),e.jsxs(c,{value:"all-time",className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"All-Time Champions"}),e.jsx("p",{className:"text-sm text-gray-600",children:u?"Since the beginning of the competition":"Since November 1, 2025"})]}),r(t.allTime)]})]})]})]})]})]})}export{we as default};
