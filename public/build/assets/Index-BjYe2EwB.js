import{r as j,j as e,H as _,L as k,a as D}from"./app-_2PsX8Y9.js";import{A as P}from"./AuthenticatedLayout-WXbr45dm.js";import{I as T,X as A}from"./input-B9ljWUQ-.js";import{B as h}from"./button-D-HNNCoW.js";import{S as M,d as R,e as V,f as I,g as c,D as H,a as E,b as L,h as B}from"./select-ey7Bbyui.js";import{T as F,a as K,b as f,c as z,d as X,e as q}from"./table-C28wfsiq.js";import{P as G,a as J,b as i,c as O,d as x,e as v,f as Q}from"./pagination-DbwvGvFe.js";import{A as U,C as W,a as Y,b as Z}from"./alert-CdFfIU9j.js";import{u as $,f as b,g as ee}from"./index-CMyROVgw.js";import{columns as se}from"./columns-DCdee5T-.js";import{S as ae}from"./search-ut195AHg.js";import{C as re}from"./use-controlled-state-BRGqcwg7.js";import"./ApplicationLogo-DNemPKQ5.js";import"./transition-b3yvlgwm.js";import"./UserAvatar-BEjBzRTn.js";import"./utils-QVnhiEkH.js";import"./proxy-CzD5jPXq.js";import"./index-DdMF-zl2.js";import"./index-ig1bzkFw.js";import"./createLucideIcon-CVH00Him.js";import"./index-eknhs4ba.js";import"./check-CSQENWlm.js";import"./badge-mz1JC0rY.js";import"./clock-DMznfz5-.js";import"./circle-x-BmMsuU1c.js";import"./circle-check-BWbUtSK4.js";import"./formatDistanceToNow-Ctx6mZEP.js";function Ae({transactions:r,filters:n}){const[C,N]=j.useState({}),[p,u]=j.useState(n?.search||""),d=$({data:r.data,columns:se,getCoreRowModel:ee(),manualPagination:!0,manualFiltering:!0,manualSorting:!0,pageCount:r.last_page,state:{columnVisibility:C,pagination:{pageIndex:r.current_page-1,pageSize:n?.per_page||10}},onColumnVisibilityChange:N}),m=s=>{D.get(route("transactions.my"),{...n,...s},{preserveState:!0,preserveScroll:!0})},g=()=>{m({search:p,page:1})},w=()=>{u(""),m({search:"",page:1})},y=s=>{s.key==="Enter"&&g()},o=s=>{m({page:s})};return e.jsxs(P,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"My Transactions"}),children:[e.jsx(_,{title:"My Transactions"}),e.jsx("div",{className:"pt-2 pb-8",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:max-w-md",children:[e.jsx(T,{placeholder:"Search by Reference ID or Amount...",value:p,onChange:s=>u(s.target.value),onKeyPress:y,className:"flex-1"}),e.jsxs(h,{onClick:g,className:"bg-black hover:bg-gray-800 text-white flex-shrink-0",children:[e.jsx(ae,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]}),n?.search&&e.jsxs(h,{onClick:w,variant:"outline",className:"border-gray-300 flex-shrink-0",children:[e.jsx(A,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-end sm:justify-start",children:[e.jsxs(M,{value:String(n?.per_page||10),onValueChange:s=>m({per_page:s,page:1}),children:[e.jsx(R,{className:"w-[120px]",children:e.jsx(V,{})}),e.jsxs(I,{children:[e.jsx(c,{value:"10",children:"10 rows"}),e.jsx(c,{value:"20",children:"20 rows"}),e.jsx(c,{value:"30",children:"30 rows"}),e.jsx(c,{value:"50",children:"50 rows"}),e.jsx(c,{value:"100",children:"100 rows"})]})]}),e.jsxs(H,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(h,{variant:"outline",children:["Columns",e.jsx(re,{className:"ml-2 h-4 w-4"})]})}),e.jsx(L,{align:"end",children:d.getAllColumns().filter(s=>s.getCanHide()).map(s=>e.jsx(B,{checked:s.getIsVisible(),onCheckedChange:a=>s.toggleVisibility(!!a),children:s.columnDef.meta?.label||s.id},s.id))})]})]})]}),r.data.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{children:"No transactions found."}),e.jsx(k,{href:route("transactions.submit"),className:"mt-4 inline-block text-gray-900 hover:text-gray-700 font-medium",children:"Submit your first transaction"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(F,{children:[e.jsx(K,{children:d.getHeaderGroups().map(s=>e.jsx(f,{children:s.headers.map(a=>e.jsx(z,{className:"border-r last:border-r-0",children:a.isPlaceholder?null:b(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(X,{children:d.getRowModel().rows.map(s=>e.jsx(f,{children:s.getVisibleCells().map(a=>e.jsx(q,{className:"border-r last:border-r-0",children:b(a.column.columnDef.cell,a.getContext())},a.id))},s.id))})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-center justify-between gap-3 sm:gap-0 mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500 w-full sm:w-auto text-center sm:text-left",children:["Showing ",r.from||0," to ",r.to||0," of"," ",r.total," results"]}),e.jsx(G,{className:"mx-0 w-full sm:w-auto justify-center sm:justify-end",children:e.jsxs(J,{children:[e.jsx(i,{children:e.jsx(O,{href:"#",onClick:s=>{s.preventDefault(),r.prev_page_url&&o(r.current_page-1)},className:r.prev_page_url?"cursor-pointer":"pointer-events-none opacity-50"})}),(()=>{const s=[],a=r.current_page,l=r.last_page;l>0&&s.push(e.jsx(i,{children:e.jsx(x,{href:"#",onClick:t=>{t.preventDefault(),o(1)},isActive:a===1,className:"cursor-pointer",children:"1"})},1)),a>3&&s.push(e.jsx(i,{children:e.jsx(v,{})},"ellipsis-1"));for(let t=Math.max(2,a-1);t<=Math.min(l-1,a+1);t++)s.push(e.jsx(i,{children:e.jsx(x,{href:"#",onClick:S=>{S.preventDefault(),o(t)},isActive:a===t,className:"cursor-pointer",children:t})},t));return a<l-2&&s.push(e.jsx(i,{children:e.jsx(v,{})},"ellipsis-2")),l>1&&s.push(e.jsx(i,{children:e.jsx(x,{href:"#",onClick:t=>{t.preventDefault(),o(l)},isActive:a===l,className:"cursor-pointer",children:l})},l)),s})(),e.jsx(i,{children:e.jsx(Q,{href:"#",onClick:s=>{s.preventDefault(),r.next_page_url&&o(r.current_page+1)},className:r.next_page_url?"cursor-pointer":"pointer-events-none opacity-50"})})]})})]})]}),r.data.some(s=>s.status==="rejected"&&s.rejection_reason)&&e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Recent Rejections:"}),r.data.filter(s=>s.status==="rejected"&&s.rejection_reason).slice(0,3).map(s=>e.jsxs(U,{variant:"destructive",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs(Y,{children:["Transaction ",s.reference_id]}),e.jsx(Z,{children:s.rejection_reason})]},s.id))]})]})})})})]})}export{Ae as default};
